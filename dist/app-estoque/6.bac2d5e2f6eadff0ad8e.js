(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Oltv:function(e,t,i){"use strict";i.r(t),i.d(t,"InterpretesModule",function(){return F});var o=i("Ttx4"),s=i("tyNb"),a=i("mrSG"),c=i("rBj3");class n extends c.a{}var r=i("3Pt+"),l=i("JX91"),b=i("/uUt"),d=i("lJxs"),m=i("fXoL"),p=i("aceb"),u=i("ZJFI");let f=(()=>{class e extends u.a{constructor(){super("interpretes")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=m.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=i("85Ox"),v=i("+ilz"),g=i("W/J3"),y=i("ofXK"),X=i("0FS3");function W(e,t){if(1&e){const e=m.Yb();m.Xb(0,"button",7),m.ec("click",function(){return m.vc(e),m.gc().add()}),m.Sb(1,"i",8),m.Wb()}}function S(e,t){if(1&e){const e=m.Yb();m.Xb(0,"tr"),m.Xb(1,"td",15),m.Dc(2),m.Wb(),m.Xb(3,"td",15),m.Dc(4),m.Wb(),m.Xb(5,"td",15),m.Dc(6),m.Wb(),m.Xb(7,"td",15),m.Dc(8),m.Wb(),m.Xb(9,"td",15),m.Dc(10),m.Wb(),m.Xb(11,"td",15),m.Dc(12),m.Wb(),m.Xb(13,"td",15),m.Dc(14),m.Wb(),m.Xb(15,"td",15),m.Dc(16),m.Wb(),m.Xb(17,"td",15),m.Dc(18),m.hc(19,"date"),m.Wb(),m.Xb(20,"td",16),m.Xb(21,"button",17),m.ec("click",function(){m.vc(e);const i=t.$implicit;return m.gc(2).selecion(i)}),m.Sb(22,"i",18),m.Wb(),m.Xb(23,"button",19),m.ec("click",function(){m.vc(e);const i=t.$implicit;return m.gc(2).remove(i)}),m.Sb(24,"i",20),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=t.$implicit,i=m.gc(2);m.Fb(2),m.Ec(e.codigo),m.Fb(2),m.Ec(e.status),m.Fb(2),m.Ec(e.nome),m.Fb(2),m.Ec(i.buscaAdministracao(e.idadministracao).nome),m.Fb(2),m.Ec(i.buscaComum(e.idcomum).nome),m.Fb(2),m.Ec(e.telefone1),m.Fb(2),m.Ec(e.telefone2),m.Fb(2),m.Ec(e.email),m.Fb(2),m.Ec(m.jc(19,9,e.oficializacao,"MM/dd/yyyy"))}}function k(e,t){if(1&e&&(m.Xb(0,"div",9),m.Xb(1,"table",10),m.Xb(2,"thead",11),m.Xb(3,"tr"),m.Xb(4,"th",12),m.Dc(5,"C\xf3digo"),m.Wb(),m.Xb(6,"th",12),m.Dc(7,"Status"),m.Wb(),m.Xb(8,"th",12),m.Dc(9,"Nome"),m.Wb(),m.Xb(10,"th",12),m.Dc(11,"Administra\xe7\xe3o"),m.Wb(),m.Xb(12,"th",12),m.Dc(13,"Comum"),m.Wb(),m.Xb(14,"th",13),m.Dc(15,"Telefones com DDD"),m.Wb(),m.Xb(16,"th",12),m.Dc(17,"E-mail"),m.Wb(),m.Xb(18,"th",12),m.Dc(19,"Oficializa\xe7\xe3o"),m.Wb(),m.Xb(20,"th",12),m.Dc(21,"A\xe7oes"),m.Wb(),m.Wb(),m.Wb(),m.Xb(22,"tbody"),m.Bc(23,S,25,12,"tr",14),m.Wb(),m.Wb(),m.Wb()),2&e){const e=m.gc();m.Fb(23),m.mc("ngForOf",e.interpretes)}}function D(e,t){if(1&e){const e=m.Yb();m.Xb(0,"nb-card",21),m.Xb(1,"nb-card-header"),m.Dc(2,"Dados Cadastrais"),m.Wb(),m.Xb(3,"nb-card-body"),m.Xb(4,"form",22),m.Sb(5,"formly-form",23),m.Wb(),m.Wb(),m.Xb(6,"nb-card-footer",24),m.Xb(7,"button",25),m.ec("click",function(){return m.vc(e),m.gc().save()}),m.Sb(8,"i",26),m.Dc(9),m.Wb(),m.Xb(10,"button",27),m.ec("click",function(){return m.vc(e),m.gc().cancel()}),m.Sb(11,"i",28),m.Dc(12," Cancelar "),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=m.gc();m.Fb(4),m.mc("formGoup",e.form),m.Fb(1),m.mc("model",e.model)("fields",e.fields)("form",e.form),m.Fb(2),m.mc("disabled",!e.form.valid),m.Fb(2),m.Fc(" ",e.edit?"atualizar":"Salvar"," ")}}const O=[{path:"",component:(()=>{class e{constructor(e,t,i,o,s){this.toastService=e,this.interpretesService=t,this.regionalService=i,this.administracaoService=o,this.comumService=s,this.view="table",this.form=new r.i({})}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){const{data:e}=yield this.regionalService.getAll();this.regionaisSelect=e;const t=yield this.administracaoService.getAll();this.administracoesSelect=t.data;const i=yield this.comumService.getAll();this.comunsSelect=i.data,this.regional="Bras\xedlia",console.log(this.interpretesService),this.interpretesService.getAll(10).then(e=>this.interpretes=e.data),this.buildForm(),this.view="table"})}cancel(){this.view="table",this.form.reset()}buildForm(){this.fields=[{fieldGroupClassName:"row",fieldGroup:[{className:"col-3 m-1",key:"codigo",type:"input",templateOptions:{label:"C\xf3digo",type:"text",required:!0}},{className:"col-4 m-1",key:"nome",type:"input",templateOptions:{label:"Nome:",type:"text",placeholder:"Informe um nome",required:!0}},{className:"col-4 m-1",key:"status",type:"select",templateOptions:{label:"Status:",type:"text",placeholder:"Seleciona um status",required:!0,options:[{label:"Habilitado",value:"habilitado"},{label:"N\xe3o Habilitado",value:"Nhabilitado"},{label:"Diversos",value:"diversos"}]}},{className:"col-11 m-1",key:"statusJustificativa",type:"textarea",templateOptions:{label:"Justificativa para status Diversos",maxLength:100,rows:3,type:"text"},expressionProperties:{hideExpression:'model.status != "diversos" '}},{className:"col-3 m-1",key:"idregional",type:"select",templateOptions:{label:"Regional:",type:"text",placeholder:"Selecione a regional",required:!0,options:this.regionaisSelect,valueProp:"id",labelProp:"nome"}},{className:"col-4 m-1",key:"idadministracao",type:"select",templateOptions:{label:"Administra\xe7\xe3o:",type:"text",placeholder:"Selecione a Administra\xe7\xe3o",required:!0,options:[],valueProp:"id",labelProp:"nome"},hooks:{onInit:e=>{const t=this.administracoesSelect,i=e.form.get("idregional");console.log(i),e.templateOptions.options=i.valueChanges.pipe(Object(l.a)(i.value),Object(b.a)(),Object(d.a)(i=>{const o=t.filter(e=>e.idregional===i);return o.find(e=>i===e.id)||e.formControl.setValue(null),o}))}}},{className:"col-4 m-1",key:"idcomum",type:"select",templateOptions:{label:"Comum:",type:"text",placeholder:"Selecione a Comum",required:!0,options:[],valueProp:"id",labelProp:"nome"},hooks:{onInit:e=>{const t=this.comunsSelect,i=e.form.get("idadministracao");console.log(i),e.templateOptions.options=i.valueChanges.pipe(Object(l.a)(i.value),Object(b.a)(),Object(d.a)(i=>{const o=t.filter(e=>e.idadministracao===i);return o.find(e=>i===e.id)||e.formControl.setValue(null),o}))}}},{className:"col-6 m-1",key:"telefone1",type:"input",templateOptions:{label:"Telefone principal:",type:"number"}},{className:"col-5 m-1",key:"telefone2",type:"input",templateOptions:{label:"Telefone 2:",type:"number"}},{className:"col-6 m-1",key:"email",type:"input",templateOptions:{label:"E-mail",type:"text"}},{className:"col-5 m-1",key:"oficializacao",type:"input",templateOptions:{label:"Data de oficializa\xe7\xe3o",type:"date",required:!0}}]}]}add(){this.form.reset(),this.model=new n,this.edit=!1,this.view="form"}save(){this.model.id?this.update():this.form.valid&&this.interpretesService.add(this.model).then(e=>{e.error?this.message("\xc9rro",`Erro ao salvar. Detalhes: ${e.error.message}`,"danger"):(this.interpretes.push(e.data[0]),this.view="table",this.message("Ok","Interprete Salvo com sucesso","success"))})}update(){this.interpretesService.update(this.model).then(()=>{const e=this.interpretes.findIndex(e=>e.id==this.model.id);this.interpretes[e]=this.model,this.view="table",this.message("Ok","Int\xe9rprete Atualizado com sucesso","success")})}selecion(e){this.edit=!0,this.view="form",this.model=e}remove(e){this.interpretesService.delete(e).then(()=>{this.interpretes=this.arrayRemove(this.interpretes,e.id),this.message("Exclus\xe3o","Int\xe9rprete Exclu\xeddo  com sucesso","danger")})}arrayRemove(e,t){return e.filter(e=>e.id!=t)}buscaAdministracao(e){return this.administracoesSelect.filter(t=>t.id==e)[0]}buscaComum(e){return this.comunsSelect.filter(t=>t.id==e)[0]}message(e,t,i){this.toastService.show(e,t,{status:i,duration:3e3})}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(p.w),m.Rb(f),m.Rb(h.a),m.Rb(v.a),m.Rb(g.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-interpretes"]],decls:12,vars:4,consts:[[1,"p-1"],[1,"card","col-lg-12"],[1,"card-header"],["type","button","class","btn btn-outline-info btn-lg",3,"click",4,"ngIf"],[1,"col-lg-4","m-2"],["class","p-1 col-lg-12",4,"ngIf"],["status","success",4,"ngIf"],["type","button",1,"btn","btn-outline-info","btn-lg",3,"click"],[1,"fa","fa-plus-circle"],[1,"p-1","col-lg-12"],[1,"table","table-striped","table-hover"],[1,"table-dark"],[1,"text-center"],["colspan","2",1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-center",2,"padding-top","20px"],[1,"text-center","m-mp-2"],["type","button",1,"btn","btn-success","btn-sm","m-1",3,"click"],[1,"fa","fa-edit"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-remove"],["status","success"],[3,"formGoup"],[3,"model","fields","form"],[1,"action-footer"],["type","button",1,"btn","btn-primary","btn-md",3,"disabled","click"],[1,"fa","fa-check-circle"],["type","button",1,"btn","btn-danger","btn-md",3,"click"],[1,"fa","fa-window-close"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xb(3,"h3"),m.Dc(4,"Congrega\xe7\xe3o Crist\xe3 no Brasil - Cadastro de int\xe9rpretes de libras "),m.Bc(5,W,2,0,"button",3),m.Wb(),m.Wb(),m.Wb(),m.Xb(6,"div",4),m.Xb(7,"div"),m.Xb(8,"h4"),m.Dc(9),m.Wb(),m.Wb(),m.Wb(),m.Bc(10,k,24,1,"div",5),m.Bc(11,D,13,6,"nb-card",6),m.Wb()),2&e&&(m.Fb(5),m.mc("ngIf","table"==t.view),m.Fb(4),m.Fc("Regional: ",t.regional,""),m.Fb(1),m.mc("ngIf","table"==t.view),m.Fb(1),m.mc("ngIf","form"==t.view))},directives:[y.n,y.m,p.c,p.e,p.b,r.y,r.o,X.d,p.d],pipes:[y.e],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({imports:[[s.g.forChild(O)],s.g]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Pb({type:e}),e.\u0275inj=m.Ob({imports:[[o.a,w]]}),e})()}}]);